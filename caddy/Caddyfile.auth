# Boundless API Reverse Proxy (with basic auth)
# Uses environment variables: {$VAR} or {$VAR:default}

{
	email {$CADDY_ACME_EMAIL:admin@localhost}
}

{$CADDY_DOMAIN::80} {
	# Health check (no auth)
	handle /health {
		reverse_proxy {$CADDY_API_HOST:rest_api}:{$CADDY_API_PORT:8081}
	}

	# API endpoints (with basic auth)
	handle {
		basicauth {
			{$CADDY_AUTH_USER} {$CADDY_AUTH_PASS_HASH}
		}
		reverse_proxy {$CADDY_API_HOST:rest_api}:{$CADDY_API_PORT:8081}
	}
}
