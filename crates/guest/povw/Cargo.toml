[package]
name = "boundless-povw-guests"
resolver = "2"
version = { workspace = true }
edition = { workspace = true }
homepage = { workspace = true }
repository = { workspace = true }
publish = false

[dependencies]
alloy-contract = { version = "1.0", optional = true }
alloy-primitives = { version = "1.0", features = ["serde", "k256"] }
alloy-provider = { version = "1.0", optional = true }
alloy-signer = { version = "1.0", optional = true }
alloy-sol-types = "1.0"
anyhow = "1.0"
borsh = { version = "1.5", default-features = false, features = ["std", "derive"] }
bytemuck = { version = "1.23", features = ["must_cast"] }
derive_builder = "0.20.2"
postcard = { version = "1.1", features = ["alloc"] }
risc0-ethereum-contracts = { workspace = true, optional = true }
# TODO(povw): Use a released version of risc0 and steel.
risc0-povw = { git = "https://github.com/risc0/risc0", branch = "victor/povw-patch-povw", default-features = false, features = ["guest"] }
risc0-steel = { git = "https://github.com/boundless-xyz/steel", rev = "26ab6a5bddb33dc42b69ed9b8116ef820ce45907" }
risc0-zkvm = { workspace = true, features = ["client", "unstable"], optional = true }
ruint = { version = "1.15", default-features = false, features = ["borsh", "std"] }
serde = "1"

[dev-dependencies]
alloy = { workspace = true, features = ["network", "node-bindings", "rpc-types", "providers", "transports", "sol-types", "contract", "signers", "signer-local"] }
derive_builder = "0.20.2"
rand = "0.9"
risc0-ethereum-contracts = { workspace = true, features = ["unstable"] }
risc0-povw = { git = "https://github.com/risc0/risc0", branch = "victor/povw-patch-povw", features = ["prover"] }
risc0-zkvm = { workspace = true, features = ["client", "unstable"] }
tokio = { workspace = true }

[build-dependencies]
risc0-build = { workspace = true, features = ["unstable"], optional = true }
risc0-build-ethereum = { workspace = true, optional = true }
serde_json = { version = "1.0", optional = true }

[package.metadata.risc0]
methods = ["mint-calculator", "log-updater"]

[package.metadata.release]
release = false

[features]
default = ["prover"]
host = ["signer", "risc0-steel/host", "dep:alloy-provider", "dep:alloy-contract", "dep:serde_json"]
prover = ["host", "dep:risc0-zkvm", "dep:risc0-ethereum-contracts"]
signer = ["dep:alloy-signer"]
build-guest = [
  "dep:risc0-build",
  "dep:risc0-build-ethereum",
]
