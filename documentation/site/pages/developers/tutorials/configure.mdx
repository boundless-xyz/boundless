import PricingCalculator from "../../../components/pricing-calculator";
import TimeCalculator from "../../../components/time-calculator";

# Configuring A Request

Each request specifies a set of request parameters (see [request.yaml](https://github.com/boundless-xyz/boundless/blob/main/request.yaml)); these parameters specify the request ID, the proof requirements, the URL for the relevant guest program and its inputs, and *the offer parameters*. This guide helps requestors understand, configure and optimize their requests via these *offer parameters*.

## Anatomy of a Proof Request

### What are the offer parameters?

The offer parameters determine how the auction is executed, and therefore how provers respond to the request. They specify the parameters of the [reverse Dutch auction](https://en.wikipedia.org/wiki/Reverse_auction#Dutch_reverse_auctions) (see [proof lifecycle](/developers/proof-lifecycle) for a general overview). This is the mechanism by which the requestor and prover can agree upon a price, and ensures the requestor will get the best price available from any prover on the market.

Requestors, who understand these offer parameters, will be able to more effectively tailor requests to current market conditions. This is essential for getting timely and cost-effective proofs. 

### Offer Parameters

:::tip
The Boundless monorepo has a template [request.yaml](https://github.com/boundless-xyz/boundless/blob/main/request.yaml) which specifies all possible request configuration variables. For testing, developers can use the [Boundless CLI to request a proof](/developers/tooling/cli#requesting-a-proof-via-the-boundless-cli).
:::

![Offer Parameter Diagram](/request_diagram.png)

| Parameter      | request.yaml name | Units   | Description                                                                                                                                                                                     |
|----------------|-------------------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Ramp Up Start  | `rampUpStart`     | seconds  | This parameter is a timestamp; concretely, it dictates exactly when the auction begins after order creation. TODO   |
| Ramp Up Period | `rampUpPeriod`    | blocks  | The duration of time period where the auction price increases linearly. Concretely, it is the number of blocks it takes for the price to increase from the minimum price (`min_price`) to the maximum price (`max_price`).|
| Lock Timeout   | `lockTimeout`     | seconds | This timestamp is specified as an offset from `rampUpStart`. The maximum time a prover has to submit once the ramp up period has begun. Regardless of when the prover locks, they must submit the job onchain prior to this time (i.e. `rampUpStart` + `lockTimeout` after order creation), otherwise they will be slashed. |
| Timeout        | `timeout`         | seconds | This timestamp is specified as an offset from `rampUpStart`. The total time after which the proof expires. After this time, if no provers have fulfilled the request, the request will stay *unfulfilled*.|
| Min Price      | `min_price`       | wei     | The floor price of the auction; this can be set to 0.|
| Max Price      | `max_price`       | wei     | The ceiling price of the auction; the absolute maximum price the auction will reach. |
| Collateral     | `lockCollateral`  | $ZKC     | Provers have to deposit *$ZKC* as [proving collateral](/zkc/collateral). This parameter specifies the exact amount of *$ZKC* a prover will lock as collateral when locking the order. If the prover does not fulfill the request before the primary prover deadline (the lock timeout), this collateral is slashed and 50% of the collateral becomes a bounty for secondary provers to claim upon successful proof fulfillment.                                            |


### Example Request Walkthrough

Let's take an example request with the following offer parameters specified in the [request.yaml](https://github.com/boundless-xyz/boundless/blob/main/request.yaml):

```bash
offer:
    minPrice: 1000000000000000 # 0.001 ETH
    maxPrice: 2000000000000000 # 0.002 ETH
    lockCollateral: 300000000000000000000 # 300 ZKC
    rampUpStart: 10 # seconds
    rampUpPeriod: 50 # blocks
    lockTimeout: 2700 # 45 minutes
    timeout: 3600 # 1 hour 
```

#### Auction

- After order creation and before the ramp up start time i.e. 10 seconds, the order is surfaced to the market; provers can not lock until the 10 seconds (i.e. `rampUpStart` time) is over. In theory, setting this value into the future should minimize the advantage for provers who run execution vs provers who skip it[^1]. It also prevents provers from locking proofs in the same block as the request.
- At 10 seconds, the price is set to the minimum price of 0.001 $ETH and the bidding officially starts.
- During the "ramp up period" (which immediately follows the ramp up start period), the price grows linearly from the minimum price to the maximum price of 0.002 ETH, over the span of 50 blocks (~100 seconds on Base mainnet).
- After the "ramp up period", the price remains at the maximum price until the primary prover deadline (the "lock timeout" of 45 minutes). If the prover who locked the order (the primary prover) does not fulfill by this deadline, they will be slashed. This means that they will lose their proving collateral for this order; 50% of it will be burned and 50% of it will go to a secondary prover (more on this below). 
- After the "lock timeout", a race amongst secondary provers begins. They have until the "timeout" (1 hour from request creation, 15 minutes from the primary prover deadline) to fulfill the request otherwise the order expires. The first prover to win this race will receive 50% of the order's proving collateral as a reward.

#### Prover Specifics

Provers can lock a request at any time before the "lock timeout". When a prover locks a request, they are agreeing to be paid the price set at the time of their bid. They are also agreeing to be slashed if they do not fulfill the request before the "lock timeout". In this case, if the request was locked but not fulfilled in time, the order is slashed and the prover loses their "lock collateral". Concretely, 50%[^1] of the "lock collateral" is burned and 50% is allocated to the first prover who fulfills the proof, after the "lock timeout" but before the "timeout"; this prover is known as the secondary prover.

## Offer Parameter Recommendations

### Estimate the Execution/Proving Time of a Request

Based on current average execution and proving MHz, this calculator will estimate the execution and proving time of a request:

<TimeCalculator />

For the following recommendations, the estimated execution and proving times will be labelled as `estimated_execution_time` and `estimated_proving_time` respectively.

The following two sections detail some recommended guidelines when setting the offer parameters. These guidelines are formulas, and they are to be taken with a pinch of salt. Please remember to start conservatively when tuning each parameter. Provers have to respond and some may set their pricing strategy based on each requestor's standard request profile. Therefore, it is recommended to change offer parameters in small increments during testing, and *only* change offer parameters again once proof fulfillment becomes stable.

### Latency Sensitive Parameters

Each requestor will have a different latency tolerance; some might be fine with receiving a proof on the scale of hours, whereas others will have more time-critical applications and require proof fulfillment on the scale of minutes. These latency requirements should dictate how requestors set the time-based offer parameters. 


| Parameter      | Units   | Recommendation                       | Notes                                                                                                                                 |
|----------------|---------|--------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------|
| Ramp Up Start  | seconds  | 5 x `estimated_execution_time` | This recommended time allows provers to see the order in the market, and increase the chances of provers having a free executor agent to preflight the order. If this is set lower, there is a chance that the request will be locked at a higher price as provers will only be able to bid after the auction has already started. This parameter is important, as the lock timeout and timeout are specified in seconds *after* the ramp up start timestamp. For example, setting it equal to 10 specifies 10 seconds in the future after order creation. If it is set to 0, the current UNIX timestamp, at order creation, will be used. |
| Ramp Up Period | blocks  | 10 x `estimated_execution_time`| See [calculator](/developers/tutorials/configure#estimate-the-executionproving-time-of-a-request).  |
| Lock Timeout   | seconds | 1.25 x `estimated_proving _time` | See [calculator](/developers/tutorials/configure#estimate-the-executionproving-time-of-a-request). |
| Timeout        | seconds | 3 x `estimated_proving_time` | See [calculator](/developers/tutorials/configure#estimate-the-executionproving-time-of-a-request). |

### Price Sensitive Parameters

The price of a request determines how competitively provers bid on the request, and therefore how quickly the request is locked. 

| Parameter     | Units | Recommendation | Notes |
|---------------|-------|----------------|-------|
| Minimum Price | wei   | Initially, set the minimum price to 0[^1]. To guarantee the lowest latency in both locking and fulfillment, set the minimum price as non-zero.    | As market demand and supply normalizes, competition will stabilize prices at non-zero.|
| Maximum Price | wei   | It is recommended to test the `maxPrice` parameter by starting low, and bumping the value up only when requests are not locked whatsoever. | Setting a substantial price ensures requests are visible and attractive to provers. For testing purposes, the recommended lowest amount for the maximum price is $0.1 of ETH per GCycle (1 billion cycles).[^1] |


[^1]: This is accurate for October 2025.



