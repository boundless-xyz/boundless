# Bento Docker Compose Environment Variables
# Generated by Ansible - Do not edit manually

# Docker Runtime (nvidia for GPU hosts, runc for CPU-only)
DOCKER_RUNTIME={{ prover_docker_runtime | default('nvidia') }}

# Database Configuration
POSTGRES_HOST={{ prover_postgres_host }}
POSTGRES_PORT={{ prover_postgres_port }}
POSTGRES_DB={{ prover_postgres_db }}
POSTGRES_USER={{ prover_postgres_user }}
POSTGRES_PASSWORD={{ prover_postgres_password }}

# Redis/Valkey Configuration
REDIS_HOST={{ prover_redis_host }}
REDIS_PASSWORD={{ prover_redis_password }}

# MinIO Configuration
MINIO_HOST={{ prover_minio_host }}
MINIO_BUCKET={{ prover_minio_bucket }}
MINIO_ROOT_USER={{ prover_minio_root_user }}
MINIO_ROOT_PASS={{ prover_minio_root_pass }}

# Bento Configuration
RUST_LOG={{ prover_rust_log }}
NO_COLOR=1
RISC0_HOME={{ prover_risc0_home }}
SEGMENT_SIZE={{ prover_segment_size }}
RISC0_KECCAK_PO2={{ prover_risc0_keccak_po2 }}
REDIS_TTL={{ prover_redis_ttl }}
SNARK_TIMEOUT={{ prover_snark_timeout }}

# Prover Binary URL (for prebuilt images)
{% if prover_binary_url is defined and prover_binary_url | string | length > 0 %}
BENTO_BINARY_URL={{ prover_binary_url }}
{% endif %}
# Dockerfile configuration (for building from source)
{% if prover_agent_dockerfile is defined and prover_agent_dockerfile | string | length > 0 %}
AGENT_DOCKERFILE={{ prover_agent_dockerfile }}
{% endif %}
{% if prover_broker_dockerfile is defined and prover_broker_dockerfile | string | length > 0 %}
BROKER_DOCKERFILE={{ prover_broker_dockerfile }}
{% endif %}
{% if prover_rest_api_dockerfile is defined and prover_rest_api_dockerfile | string | length > 0 %}
REST_API_DOCKERFILE={{ prover_rest_api_dockerfile }}
{% endif %}

# BLAKE3 Groth16 artifacts (required for GPU proving)
{% if prover_blake3_groth16_url is defined and prover_blake3_groth16_url | string | length > 0 %}
BLAKE3_GROTH16_ARTIFACTS_URL={{ prover_blake3_groth16_url }}
{% endif %}

# Set Verifier Address
{% if prover_set_verifier_address is defined and prover_set_verifier_address | string | length > 0 %}
SET_VERIFIER_ADDRESS={{ prover_set_verifier_address }}
{% endif %}
# Boundless Market Address
{% if prover_boundless_market_address is defined and prover_boundless_market_address | string | length > 0 %}
BOUNDLESS_MARKET_ADDRESS={{ prover_boundless_market_address }}
{% endif %}
# Collateral Token Address
{% if prover_collateral_token_address is defined and prover_collateral_token_address | string | length > 0 %}
COLLATERAL_TOKEN_ADDRESS={{ prover_collateral_token_address }}
{% endif %}
# Order Stream URL
{% if prover_order_stream_url is defined and prover_order_stream_url | string | length > 0 %}
ORDER_STREAM_URL={{ prover_order_stream_url }}
{% endif %}

# Worker counts
{% if prover_executor_count is defined and prover_executor_count | string | length > 0 %}
BENTO_EXECUTOR_COUNT={{ prover_executor_count }}
{% endif %}
{% if prover_aux_worker_count is defined and prover_aux_worker_count | string | length > 0 %}
BENTO_AUX_WORKER_COUNT={{ prover_aux_worker_count }}
{% endif %}
# Broker Configuration (if enabled)
{% if prover_private_key is defined and prover_private_key | string | length > 0 %}
PROVER_PRIVATE_KEY={{ prover_private_key }}
{% endif %}
{% if prover_povw_log_id is defined and prover_povw_log_id | string | length > 0 %}
POVW_LOG_ID={{ prover_povw_log_id }}
{% endif %}
{% if prover_rpc_url is defined and prover_rpc_url | string | length > 0 %}
PROVER_RPC_URL={{ prover_rpc_url }}
{% endif %}
{% if prover_rpc_urls is defined and prover_rpc_urls | string | length > 0 %}
PROVER_RPC_URLS={{ prover_rpc_urls }}
{% endif %}

# Caddy Configuration (if using caddy profile)
{% if caddy_domain is defined and caddy_domain | string | length > 0 %}
CADDY_DOMAIN={{ caddy_domain }}
{% endif %}
{% if caddy_acme_email is defined and caddy_acme_email | string | length > 0 %}
CADDY_ACME_EMAIL={{ caddy_acme_email }}
{% endif %}
{% if prover_caddy_file is defined and prover_caddy_file | string | length > 0 %}
CADDYFILE={{ prover_caddy_file }}
{% if caddy_api_key is defined and caddy_api_key | string | length > 0 %}
CADDY_API_KEY={{ caddy_api_key }}
{% endif %}
{% elif caddy_api_key is defined and caddy_api_key | string | length > 0 %}
CADDYFILE=Caddyfile.apikey
CADDY_API_KEY={{ caddy_api_key }}
{% endif %}
